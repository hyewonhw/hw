-- DROP
DROP TABLE LECTURE;
DROP TABLE ENROLL;
DROP TABLE STUDENT;
DROP TABLE COURSE;
DROP TABLE PROFESSOR;

-- CREATE 
CREATE TABLE PROFESSOR(
    PRO_NO    NUMBER            NOT NULL, 
    PRO_NAME  VARCHAR2(20 BYTE) NULL, 
    PRO_MAJOR VARCHAR2(20 BYTE) NULL
);

CREATE TABLE COURSE(
    COUR_NO   NUMBER            NOT NULL,
    COUR_NAME VARCHAR2(20 BYTE) NOT NULL,
    COUR_SCR  NUMBER(3)         NULL
);

CREATE TABLE STUDENT (
    STU_NO      NUMBER             NOT NULL,
    STU_NAME    VARCHAR2(20 BYTE)  NOT NULL,
    STU_ADDR    VARCHAR2(100 BYTE) NULL,
    STU_GRD     NUMBER(1)          NULL,
    PRO_NO      NUMBER             NOT NULL
);

CREATE TABLE ENROLL(
    ENR_NO   NUMBER             NOT NULL,
    STU_NO   NUMBER             NOT NULL,
    COUR_NO  NUMBER             NOT NULL,
    ENR_DATE DATE               NULL
);

CREATE TABLE LECTURE(
    LECT_NO     NUMBER             NOT NULL,
    PRO_NO      NUMBER             NOT NULL,
    ENR_NO      NUMBER             NOT NULL,
    LECT_NAME   VARCHAR2(20 BYTE)  NULL,
    LECT_PLACE  VARCHAR2(30 BYTE)  NULL
);

-- ALTER TABLE (PK)
ALTER TABLE PROFESSOR 
    ADD CONSTRAINT PK_PROFESSOR PRIMARY KEY(PRO_NO);
ALTER TABLE COURSE 
    ADD CONSTRAINT PK_COURSE PRIMARY KEY(COUR_NO);
ALTER TABLE STUDENT 
    ADD CONSTRAINT PK_STUDENT PRIMARY KEY(STU_NO);
ALTER TABLE ENROLL 
    ADD CONSTRAINT PK_ENROLL PRIMARY KEY(ENR_NO);
ALTER TABLE LECTURE
    ADD CONSTRAINT PK_LECTURE PRIMARY KEY(LECT_NO);
    
-- ALTER TABLE (FK)
ALTER TABLE STUDENT
    ADD CONSTRAINT FK_STUDENT_PROFESSOR FOREIGN KEY(PRO_NO)
        REFERENCES PROFESSOR(PRO_NO)
            ON DELETE CASCADE;
ALTER TABLE ENROLL
    ADD CONSTRAINT FK_ENROLL_STUDENT FOREIGN KEY(STU_NO)
        REFERENCES STUDENT(STU_NO)
            ON DELETE SET NULL;
ALTER TABLE ENROLL
    ADD CONSTRAINT FK_ENROLL_COURSE FOREIGN KEY(COUR_NO)
        REFERENCES COURSE(COUR_NO)
            ON DELETE SET NULL;
ALTER TABLE LECTURE
    ADD CONSTRAINT FK_LECTURE_PROFESSOR FOREIGN KEY(PRO_NO)
        REFERENCES PROFESSOR(PRO_NO) 
            ON DELETE CASCADE;
ALTER TABLE LECTURE
    ADD CONSTRAINT FK_LECTURE_ENROLL FOREIGN KEY(ENR_NO)
        REFERENCES ENROLL(ENR_NO) 
            ON DELETE CASCADE;


--PROFESSOR
INSERT INTO PROFESSOR(PRO_NO, PRO_NAME, PRO_MAJOR) VALUES (1, '제임스', '전산');
INSERT INTO PROFESSOR(PRO_NO, PRO_NAME, PRO_MAJOR) VALUES (2, '토마스', '회계');
INSERT INTO PROFESSOR(PRO_NO, PRO_NAME, PRO_MAJOR) VALUES (3, '윌리엄', '영문학');
INSERT INTO PROFESSOR(PRO_NO, PRO_NAME, PRO_MAJOR) VALUES (4, '벤틀리', '국문학');
INSERT INTO PROFESSOR(PRO_NO, PRO_NAME, PRO_MAJOR) VALUES (5, '다니엘', '철학');

-- COURSE 
INSERT INTO COURSE(COUR_NO, COUR_NAME, COUR_SCR) VALUES (11,'전산전공', 3);
INSERT INTO COURSE(COUR_NO, COUR_NAME, COUR_SCR) VALUES (22,'회계전공', 3);
INSERT INTO COURSE(COUR_NO, COUR_NAME, COUR_SCR) VALUES (33,'영문전공', 3);
INSERT INTO COURSE(COUR_NO, COUR_NAME, COUR_SCR) VALUES (44,'국문전공', 3);
INSERT INTO COURSE(COUR_NO, COUR_NAME, COUR_SCR) VALUES (55,'철학전공', 3);

-- STUDENT
INSERT INTO STUDENT(STU_NO, STU_NAME, STU_ADDR, STU_GRD, PRO_NO) VALUES (10101, '김학생', '서울', 1, 3);
INSERT INTO STUDENT(STU_NO, STU_NAME, STU_ADDR, STU_GRD, PRO_NO) VALUES (10102, '이학생', '서울', 2, 5);
INSERT INTO STUDENT(STU_NO, STU_NAME, STU_ADDR, STU_GRD, PRO_NO) VALUES (10103, '박학생', '서울', 3, 1);
INSERT INTO STUDENT(STU_NO, STU_NAME, STU_ADDR, STU_GRD, PRO_NO) VALUES (10104, '최학생', '서울', 4, 2);
INSERT INTO STUDENT(STU_NO, STU_NAME, STU_ADDR, STU_GRD, PRO_NO) VALUES (10105, '전학생', '서울', 1, 4);

-- ENROLL
INSERT INTO ENROLL(ENR_NO, STU_NO, COUR_NO, ENR_DATE) VALUES (111, 10101, 11, '22-08-01');
INSERT INTO ENROLL(ENR_NO, STU_NO, COUR_NO, ENR_DATE) VALUES (222, 10102, 22, '21-02-20');
INSERT INTO ENROLL(ENR_NO, STU_NO, COUR_NO, ENR_DATE) VALUES (333, 10103, 33, '22-03-02');
INSERT INTO ENROLL(ENR_NO, STU_NO, COUR_NO, ENR_DATE) VALUES (444, 10104, 44, '21-08-12');
INSERT INTO ENROLL(ENR_NO, STU_NO, COUR_NO, ENR_DATE) VALUES (555, 10105, 55, '20-02-13');

-- LECTURE
INSERT INTO LECTURE(LECT_NO, PRO_NO, ENR_NO, LECT_NAME, LECT_PLACE) VALUES (1111,1,111,'자바완전정복','A101');
INSERT INTO LECTURE(LECT_NO, PRO_NO, ENR_NO, LECT_NAME, LECT_PLACE) VALUES (2222,2,222,'회계완전정복','B101');
INSERT INTO LECTURE(LECT_NO, PRO_NO, ENR_NO, LECT_NAME, LECT_PLACE) VALUES (3333,3,333,'영문완전정복','C101');
INSERT INTO LECTURE(LECT_NO, PRO_NO, ENR_NO, LECT_NAME, LECT_PLACE) VALUES (4444,4,444,'국문완전정복','D101');
INSERT INTO LECTURE(LECT_NO, PRO_NO, ENR_NO, LECT_NAME, LECT_PLACE) VALUES (5555,5,555,'철학완전정복','E101');

COMMIT;





















